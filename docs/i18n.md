# Internacionalização (i18n) – PT-BR e EN-GB

Objetivo: desde o início, toda feature deve sair com tradução funcional para Português (Brasil) e Inglês (UK).

## Padrões e regras
- Idiomas suportados: pt-BR (default) e en-GB
- Todas as strings de UI, e-mails e notificações devem usar chaves de tradução
- Evitar strings literais no código; usar helper de i18n (ex.: next-intl) e arquivos JSON por namespace (ex.: common.json)
- Persistir preferência do usuário em `profiles.locale` (default pt-BR)
- Detectar idioma inicial por: (1) `profiles.locale` autenticado; (2) `NEXT_PUBLIC_DEFAULT_LOCALE`; (3) cabeçalho Accept-Language como fallback
- Rotas localizadas: `/[locale]/...` (ex.: `/pt-BR/timesheets`, `/en-GB/manager/pending`)
- Formatação local: datas/horas, números e moeda (BRL/GBP) via Intl APIs

## App (Next.js App Router)
- Biblioteca recomendada: `next-intl` (App Router)
- Estrutura:
  - `src/middleware.ts`: detecção e redirecionamento para o locale
  - `src/app/[locale]/layout.tsx`: provedor de i18n
  - `locales/pt-BR/*.json` e `locales/en-GB/*.json`
- Seleção de idioma:
  - Componente seletor no header (persistir em `profiles.locale` ao trocar)
  - Atualizar rota para o novo locale

## E-mails e notificações
- Templates por idioma com as mesmas chaves semânticas
- Escolha de idioma: `profiles.locale` do destinatário
- Placeholders padronizados (ex.: `{employeeName}`, `{period}`)

## Banco de dados
- `profiles.locale` (text, not null, default 'pt-BR', check in ('pt-BR','en-GB'))
- Nenhum impacto em RLS

## Testes
- Snapshot de componentes em ambos idiomas
- Testar rendering de páginas com `/pt-BR/...` e `/en-GB/...`
- Testar e-mails montando o HTML nos dois idiomas

## Boas práticas
- Nomear chaves por domínio: `manager.review.title`, `actions.approve`
- Evitar concatenação de strings; preferir interpolação do i18n com variáveis
- Não duplicar frases longas; reutilizar chaves comuns em `common.json`

